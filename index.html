<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Freesound Taxonomy Colorful Table Converter</title>
    <style>
        body {
            font-family: sans-serif;
            padding: 20px;
        }

        textarea,
        input {
            width: 100%;
            margin-bottom: 10px;
            font-family: monospace;
        }

        .color-inputs {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 10px;
        }
    </style>
</head>

<body>
    <h1>Freesound Taxonomy Colorful Table Converter</h1>
    <h2>TSV Input</h2>
    <textarea id="tsvInput" rows="10" placeholder="Header1\tItem1\tDetail1\nHeader1\tItem2\tDetail2">Music			description
Music	Solo percussion	m-sp	description	examples
Music	Solo instrument	m-si	description	examples
Music	Multiple instruments	m-m	description	examples
Music	Other	m-other	description	examples
Instrument samples			description	
Instrument samples	Percussion	is-p	description	examples
Instrument samples	String	is-s	description	examples</textarea>

    <h2>Color Inputs</h2>
    <div class="color-inputs">
        <div>
            <label>Header BG (comma separated):</label>
            <input id="headerBg" value="ed210c,fdae00,06ab8e,0076ba,20b100">
        </div>
        <div>
            <label>Header FG (comma separated):</label>
            <input id="headerFg" value="black,black,white,white,white">
        </div>
        <div>
            <label>Item BG (comma separated):</label>
            <input id="itemBg" value="ff8c8d,fff056,74fdea,56c1ff,89fa4e">
        </div>
        <div>
            <label>Item FG (comma separated):</label>
            <input id="itemFg" value="black,black,black,white,black">
        </div>
    </div>

    <button onclick="generateTable()">Generate Table</button>

    <button id="copyButton" onclick="copyTableHTML()">Copy HTML to Clipboard</button>
    <span id="copyStatus" style="margin-left:10px;color:green;display:none;">Copied!</span>


    <div id="outputTable" style="margin-top: 20px;"></div>

    <script>
        function generateTable() {
            const tsvText = document.getElementById('tsvInput').value.trim();
            const headerBgColors = document.getElementById('headerBg').value.split(',').map(c => '#' + c.trim());
            const headerFgColors = document.getElementById('headerFg').value.split(',').map(c => c.trim());
            const itemBgColors = document.getElementById('itemBg').value.split(',').map(c => '#' + c.trim());
            const itemFgColors = document.getElementById('itemFg').value.split(',').map(c => c.trim());

            const lines = tsvText.split('\n');
            const headerMap = {};

            lines.forEach(line => {
                const [header, item, detail] = line.split('\t');
                if (!item || !detail) return;
                if (!headerMap[header]) headerMap[header] = [];
                headerMap[header].push(`${item} (${detail})`);
            });

            const headers = Object.keys(headerMap);
            const output = [];

            output.push('<table style="width:100%;border-collapse:collapse;table-layout:fixed;text-align:center;">');

            // Header Row
            output.push('<tr>');
            headers.forEach((header, i) => {
                const bg = headerBgColors[i % headerBgColors.length];
                const fg = headerFgColors[i % headerFgColors.length];
                output.push(`<th style="width:20%;vertical-align:top;"><span style="word-break:break-word;display:block;margin:4px;padding:8px;border-radius:6px;background:${bg};color:${fg};">${header}</span></th>`);
            });
            output.push('</tr>');

            // Divider Row (dashed line)
            output.push(`<tr><td colspan="${headers.length}" style="border-bottom:1px dashed black;"></td></tr>`);

            // Items Row
            output.push('<tr>');
            headers.forEach((header, i) => {
                const items = headerMap[header] || [];
                const itemBg = itemBgColors[i % itemBgColors.length];
                const itemFg = itemFgColors[i % itemFgColors.length];
                output.push('<td style="vertical-align:top;"><ul style="list-style:none;padding:0;margin:0;">');
                items.forEach(itemText => {
                    output.push(`<li style="background:${itemBg};color:${itemFg};word-break:break-word;margin:4px;padding:8px;border-radius:6px;">${itemText}</li>`);
                });
                output.push('</ul></td>');
            });
            output.push('</tr>');

            output.push('</table>');

            document.getElementById('outputTable').innerHTML = output.join('');
        }
        let copyTimeout;

        function copyTableHTML() {
            const outputDiv = document.getElementById('outputTable');
            const tempTextarea = document.createElement('textarea');
            tempTextarea.value = outputDiv.innerHTML;
            document.body.appendChild(tempTextarea);
            tempTextarea.select();
            document.execCommand('copy');
            document.body.removeChild(tempTextarea);

            // Show "Copied!" message
            const statusSpan = document.getElementById('copyStatus');
            statusSpan.style.display = 'inline';

            // Clear any existing timeout to prevent stacking
            if (copyTimeout) clearTimeout(copyTimeout);

            // Hide the message after 2 seconds
            copyTimeout = setTimeout(() => {
                statusSpan.style.display = 'none';
            }, 2000);
        }
    </script>


</body>

</html>